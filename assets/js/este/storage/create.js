// Generated by CoffeeScript 1.4.0
/**
  @fileoverview goog.storage.Storage factory.
*/

goog.provide('este.storage.create');

goog.provide('este.storage.createCollectable');

goog.require('goog.storage.mechanism.mechanismfactory');

goog.require('goog.storage.Storage');

goog.require('goog.storage.CollectableStorage');

goog.scope(function() {
  var _ = este.storage;

  /**
    @param {string} key e.g. e-ui-formspersister
    @param {boolean=} session
    @return {goog.storage.Storage}
  */
  _.create = function(key, session) {
    var mechanism;
    if (session == null) {
      session = false;
    }
    mechanism = _.getMechanism(key, session);
    if (!mechanism) {
      return null;
    }
    return new goog.storage.Storage(mechanism);
  };
  /**
    @param {string} key e.g. e-ui-formspersister
    @param {boolean=} session
    @return {goog.storage.CollectableStorage}
  */

  _.createCollectable = function(key, session) {
    var mechanism, storage;
    if (session == null) {
      session = false;
    }
    mechanism = _.getMechanism(key, session);
    if (!mechanism) {
      return null;
    }
    storage = new goog.storage.CollectableStorage(mechanism);
    storage.collect(true);
    return storage;
  };
  /**
    @param {string} key e.g. e-ui-formspersister
    @param {boolean=} session
    @return {goog.storage.mechanism.IterableMechanism}
  */

  _.getMechanism = function(key, session) {
    var factory, mechanism;
    factory = goog.storage.mechanism.mechanismfactory;
    return mechanism = session ? factory.createHTML5SessionStorage(key) : factory.create(key);
  };
});
