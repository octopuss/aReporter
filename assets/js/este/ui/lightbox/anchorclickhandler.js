// Coffe Class fixed for Closure Compiler by Este.js
// Generated by CoffeeScript 1.4.0
/*
  @fileoverview este.ui.lightbox.AnchorClickHandler.
*/



goog.provide('este.ui.lightbox.AnchorClickHandler');

goog.require('goog.ui.Component');



  

  /**
    @constructor
    @extends {goog.ui.Component}
  */


  este.ui.lightbox.AnchorClickHandler = function() {}

  goog.inherits(este.ui.lightbox.AnchorClickHandler, goog.ui.Component);

  /**
    @inheritDoc
  */


  este.ui.lightbox.AnchorClickHandler.prototype.enterDocument = function() {
    este.ui.lightbox.AnchorClickHandler.superClass_.enterDocument.call(this);
    this.getHandler().listen(this.getElement(), 'click', this.onClick);
  };

  /**
    @param {goog.events.BrowserEvent} e
    @protected
  */


  este.ui.lightbox.AnchorClickHandler.prototype.onClick = function(e) {
    var anchor;
    anchor = this.getLightboxAnchorAncestor(e.target);
    if (!anchor) {
      return;
    }
    e.preventDefault();
    return this.dispatchClickEvent(anchor);
  };

  /**
    @param {Node} node
    @protected
  */


  este.ui.lightbox.AnchorClickHandler.prototype.getLightboxAnchorAncestor = function(node) {
    return this.dom_.getAncestor(node, function(node) {
      return node.tagName === 'A' && !node.rel.indexOf('lightbox');
    }, true);
  };

  /**
    @param {Element} anchor
    @protected
  */


  este.ui.lightbox.AnchorClickHandler.prototype.dispatchClickEvent = function(anchor) {
    var anchors;
    anchors = this.getAnchorsWithSameRelAttribute(anchor.rel);
    return this.dispatchEvent({
      type: 'click',
      currentAnchor: anchor,
      anchors: anchors
    });
  };

  /**
    @param {string} rel
    @protected
  */


  este.ui.lightbox.AnchorClickHandler.prototype.getAnchorsWithSameRelAttribute = function(rel) {
    return this.getElement().querySelectorAll("a[rel='" + rel + "']");
  };

  
